<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Super Mario — Play</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Optional: reuse your site styles if you like -->
    <link rel="preload" href="/css/site.css" as="style" />
    <link rel="stylesheet" href="/css/site.css" />
    <style>
      /* Minimal layout for the game page */
      .wrap {
        max-width: 1000px;
        margin: 2rem auto;
        padding: 0 1rem;
        text-align: center;
      }
      .controls {
        display: inline-flex;
        gap: .75rem;
        margin: 1rem 0 1.25rem;
      }
      .controls button {
        padding: .6rem 1rem;
        font-size: 1rem;
        border: 0;
        border-radius: .6rem;
        cursor: pointer;
      }
      #game {
        display: block;
        margin: 0 auto;
        border-radius: 12px;
        box-shadow: 0 8px 24px rgba(0,0,0,.15);
        background: #9ed8ff; /* matches game sky color as a fallback */
      }
      .hud-line { margin-top: .5rem; opacity: .75; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <h1>Super Mario — Play</h1>

      <div class="controls">
        <button id="startBtn" type="button">Start</button>
        <button id="resetBtn" type="button">Reset</button>
      </div>

      <canvas id="game" width="960" height="480" aria-label="Super Mario style game"></canvas>
      <p class="hud-line">Player: <strong id="playerName">anonymous</strong></p>

      <noscript>
        <p>You need JavaScript enabled to play.</p>
      </noscript>
    </div>

    <!-- Ensure we have a stored player name (game.js also has a fallback) -->
    <script>
      (function () {
        let name = localStorage.getItem('playerName');
        if (!name) {
          name = prompt('Enter your player name:');
          if (name) localStorage.setItem('playerName', name);
        }
        document.getElementById('playerName').textContent = name || 'anonymous';
      })();
    </script>

    <!-- The game logic. Posts to /api/score on game over. -->
    <script src="/game/game.js"></script>
  </body>
</html>
